2009-08-02  Chong Yidong  <cyd@stupidchicken.com>

	* help-fns.el (describe-variable): Treat list return values from
	dir-locals-find-file properly (Bug#4005).

2009-08-02  Julian Scheid <julians37@googlemail.com>  (tiny change)

	* net/tramp.el (tramp-debug-message): Print also microseconds.

2009-08-02  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-handle-insert-file-contents): Optimize, when BEG
	or END is non-nil.
	(tramp-handle-vc-registered): Use `tramp-cache-inhibit-cache'.
	(tramp-get-debug-buffer): Change `outline-regexp' according to new
	format.

	* net/tramp-cache.el (tramp-cache-inhibit-cache ): New defvar.
	(tramp-get-file-property): Use it.

	* autorevert.el (auto-revert-handler): Allow
	`auto-revert-tail-mode' for remote files.

2009-08-02  Jason Rumney  <jasonr@gnu.org>

	* minibuffer.el (read-file-name): Treat confirm options to
 	MUSTMATCH as nil when invoking x-file-dialog.  (Bug#3969)

2009-08-02  Chong Yidong  <cyd@stupidchicken.com>

	* font-lock.el (font-lock-string-face, font-lock-builtin-face)
	(font-lock-variable-name-face, font-lock-constant-face): Darken
	the colors for light backgrounds.

2009-08-01  Eli Zaretskii  <eliz@gnu.org>

	* mail/rmailsum.el (rmail-header-summary): Ignore letter-case of
	month names.  (Bug#3987)

2009-07-31  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (line-move-finish): Pass whole number to
	line-move-to-column.
	(line-move-visual): Perform hscroll to the recorded position.

2009-07-30  Jay Belanger  <jay.p.belanger@gmail.com>

	* calc/calc-mode.el (calc-matrix-brackets): Remove "P" from prompt.

2009-07-29  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-defs.el (c-version): Bump to 5.31.7.

2009-07-29  Dmitry Dzhus  <dima@sphinx.net.ru>

	* progmodes/gdb-mi.el (gdb-goto-breakpoint)
	(gdb-place-breakpoints): Use full path when setting breakpoints.

2009-07-29  Jay Belanger  <jay.p.belanger@gmail.com>

	* calc/calc.el (calc-mode-map): Add keybinding for
	`calc-transpose-lines'.

2009-07-29  Vincent Belaïche <vincent.belaiche@gmail.com>

	* calc/calc-misc.el (calc-transpose-lines): New function.

2009-07-28  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-do-copy-or-rename-file): Add messages.
	Simplify check for out-of-band methods.
	(tramp-do-copy-or-rename-file-out-of-band): Allow both files to be
	remote.  Remove messages which are in `tramp-do-copy-or-rename-file'.

2009-07-28  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-git.el (vc-git-checkin): Fix typo.

2009-07-28  Steve Yegge  <steve.yegge@gmail.com>>

	* progmodes/js2-mode.el: New file.

2009-07-28  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (jdb): Add gud-pstar to dump object information.
	(gud-menu-map): Adjust tooltip accordingly.

2009-07-27  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-bzr.el (vc-bzr-print-log): Pass multiple arguments to bzr log.
	(vc-bzr-log-view-mode): Adjust log-view-file-re.

	* add-log.el (change-log-mode-map): Add a menu.

2009-07-27  Michael Albinus  <michael.albinus@gmx.de>

	* net/dbus.el (dbus-call-method-non-blocking): Handle the case the
	function returns nil.
	(dbus-handle-event): Handle special return value :ignore.
	Reported by Jan Moringen <jan.moringen@uni-bielefeld.de>.

2009-07-26  Chong Yidong  <cyd@stupidchicken.com>

	* view.el (view-mode-enable): Don't define Helper-return-blurb if
	it's not needed.

2009-07-25  Eli Zaretskii  <eliz@gnu.org>

	Fix Bug#3888:

	* w32-vars.el (x-select-enable-clipboard): Doc fix.

	* term/pc-win.el (x-display-name, x-colors)
	(x-select-enable-clipboard, x-select-text): Doc fix.

	* term/common-win.el (x-display-name, x-colors): Doc fix.

	* term/ns-win.el (x-select-text, x-setup-function-keys, x-colors)
	(xw-defined-colors): Doc fix.

	* w32-fns.el (x-select-text, x-setup-function-keys)
	(x-get-selection, x-set-selection): Doc fix.

	* term/x-win.el (x-select-text, x-setup-function-keys)
	(x-select-enable-clipboard, xw-defined-colors): Doc fix.

	* select.el (x-set-selection): Doc fix.

2009-07-25  Michael Albinus  <michael.albinus@gmx.de>

	* net/zeroconf.el (zeroconf-init): Check for "GetVersionString"
	instead of "IsNSSSupportAvailable".  Avahi ought to work also when
	"IsNSSSupportAvailable" method is not available.  Reported by
	Steve Youngs <steve@sxemacs.org>.

2009-07-24  Kenichi Handa  <handa@m17n.org>

	* international/characters.el: Fix setting of category ?C, ?|, ?K,
	and ?H.  Fix setting of case for Latin Extended and Greek
	Extended.
	(build-unicode-category-table): Fix range checks.

2009-07-24  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-dispatcher.el (vc-resynch-buffers-in-directory): Make sure
	the buffer we try to sync is current when calling
	vc-resynch-buffer.

	* vc-dir.el (vc-dir-resynch-file): Make sure vc-dir-update does
	not show up to date files.

2009-07-24  Glenn Morris  <rgm@gnu.org>

	* emacs-lisp/elint.el (elint-current-buffer, elint-defun):
	Add autoload cookies.  If necessary, initialize.
	(elint-log): Handle non-file buffers.
	(elint-initialize): Add optional argument to reinitialize.
	(elint-find-builtin-variables): Save excursion.

2009-07-23  Dan Nicolaescu  <dann@ics.uci.edu>

	* emacs-lisp/lisp-mode.el (emacs-lisp-mode-map): Add menu entries
	for Lint.

2009-07-22  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc.el (vc-print-log-internal): New function, split out from ...
	(vc-print-log): ... here.
	(vc-dir-move-to-goal-column): Declare.

	* vc-git.el (vc-git-add-signoff): New variable.
	(vc-git-checkin): Use it.
	(vc-git-toggle-signoff): New function.
	(vc-git-extra-menu-map): Bind it to menu.
	(vc-git--run-command-string): Accept a nil FILE argument.
	(vc-git-stash-list): New function.
	(vc-git-dir-extra-headers): Use it.

2009-07-23  Glenn Morris  <rgm@gnu.org>

	* help-fns.el (describe-variable): Describe ignored and risky local
	variables in a similar way to that in which we describe safe ones.

	* emacs-lisp/bytecomp.el (byte-compile-from-buffer)
	(byte-compile-output-file-form, byte-compile-output-docform)
	(byte-compile-file-form-defmumble, byte-compile-output-as-comment):
	Give some more local variables with common names a "bytecomp-" prefix,
	so as not to shadow things during compilation.
	* emacs-lisp/cl-macs.el (load-time-value)
	* emacs-lisp/cl.el (cl-compiling-file): Update for the name-change
	`outbuffer' to `bytecomp-outbuffer'.

	* emacs-lisp/elint.el (elint-standard-variables): Remove most members,
	since the next two variables cover them automatically now.
	(elint-builtin-variables, elint-autoloaded-variables): New.
	(elint-unknown-builtin-args): Remove all members, since they can be
	parsed automatically now.
	(elint-extra-errors): New.
	(elint-env-add-env, elint-env-add-macro): Use cadr.
	(elint-current-buffer): Use or.  Change final message.
	(elint-get-top-forms): Use line-end-position.
	(elint-init-env): Use cadr.  Handle autoload, declare-function,
	and defalias.
	(elint-add-required-env): Doc fix.  Use or.  Standardize error.
	(regexp-assoc): Remove unused function.
	(elint-top-form): Set elint-current-pos, to record the start of the
	top-level form, for compilation-mode.
	(elint-form): Trap errors in macro expansion.  Use dolist.
	(elint-unbound-variable): Use elint-builtin-variables and
	elint-autoloaded-variables.
	(elint-get-args): Use cadr, or.
	(elint-check-cond-form): Use dolist, cadr.
	(elint-check-condition-case-form): Doc fix.  Use cadr.
	Use elint-extra-errors.
	(elint-log): New function.
	(elint-error, elint-warning): Use elint-log for a bytecomp-style format.
	Distinguish errors and warnings.
	(elint-log-message): Use with-current-buffer.  Inhibit read-only.
	Use a bytecomp-style format.
	(elint-clear-log): Preserve default-directory.  Inhibit read-only.
	(elint-get-log-buffer): Use compilation mode.  Disable undo.
	Don't truncate lines.
	(elint-initialize): Set builtin and autoloaded variable lists.
	Only process elint-unknown-builtin-args if non-nil.
	(elint-find-builtin-variables, elint-find-autoloaded-variables):
	New functions.
	(elint-find-builtin-args): Doc fix.  Handle "BODY...)".

2009-07-22  Kevin Ryde  <user42@zip.com.au>

	* net/newst-backend.el (newsticker--parse-atom-1.0)
	(newsticker--parse-rss-0.91, newsticker--parse-rss-0.92)
	(newsticker--parse-rss-1.0):
	* progmodes/idlwave.el (idlwave-mode):
	* progmodes/idlw-shell.el (idlwave-shell-mode):
	* progmodes/vera-mode.el (vera-mode):
	* progmodes/verilog-mode.el (verilog-auto-inst, verilog-auto):
	* progmodes/vhdl-mode.el (vhdl-mode):
	* textmodes/table.el (table-generate-source)
	(table--warn-incompatibility):
	Hyperlink urls in docstrings with URL `...'.

2009-07-22  Glenn Morris  <rgm@gnu.org>

	* emacs-lisp/advice.el, emacs-lisp/checkdoc.el:
	* emacs-lisp/debug.el, emacs-lisp/elp.el, emacs-lisp/gulp.el:
	* emacs-lisp/lisp.el, emacs-lisp/pp.el, emacs-lisp/trace.el:
	Remove leading * from defcustom docs.

	* simple.el (blink-matching-paren-distance): Bump to 100k.  (Bug#3889)

	* emacs-lisp/shadow.el (shadows-compare-text-p): Remove leading * from
	defcustom doc.
	(list-load-path-shadows): Optionally, just return shadows as a string.

	* mail/emacsbug.el (report-emacs-bug): Include any load-path shadows.

2009-07-21  Chong Yidong  <cyd@stupidchicken.com>

	* mail/rmailedit.el (rmail-edit-mode): Use
	auto-save-include-big-deletions.

	* mail/rmail.el (rmail-variables): Use
	auto-save-include-big-deletions.

	* files.el (auto-save-mode): Revert 2009-07-21 and 2009-07-16
	changes.

2009-07-21  Jay Belanger  <jay.p.belanger@gmail.com>

	* calc/calc.el (calc-undo-length): New variable.
	(calc-quit): Truncate rather than eliminate `calc-undo-list'.

2009-07-21  Richard Stallman  <rms@gnu.org>

	* files.el (auto-save-mode): Handle buffer-save-size = -2
	for toggling mode.

2009-07-21  Glenn Morris  <rgm@gnu.org>

	* textmodes/ispell.el (ispell-looking-back): Update declaration.

	* calendar/todo-mode.el (calendar-current-date): Update declaration.

	* ps-print.el (ps-jitify, ps-lazify): Remove aliases only used to
	silence compiler.  Instead...
	(jit-lock-fontify-now, lazy-lock-fontify-region): ...Declare.
	(ps-print-ensure-fontified): Update for above function name changes.

	* printing.el (pr-mh-get-msg-num, pr-mh-show)
	(pr-mh-start-of-uncleaned-message): Remove aliases only used to
	silence compiler.  Instead...
	(mh-get-msg-num, mh-show, mh-start-of-uncleaned-message): ...Declare.
	(mh-show-buffer): Only define for compiler.
	(pr-mh-current-message): Update for above function name changes.

	* files.el (abort-if-file-too-large): Explicitly pass `filename'
	as an argument.
	(find-file-noselect, insert-file-1): Update for above change.

	* mail/rmail.el (rmail-retry-ignored-headers): Bump :version.

	* mail/mailclient.el (mailclient-send-it): Fix message.

	* emacs-lisp/edebug.el (cl-debug-env): Only define for compiler.
	(edebug-eval): Check cl-debug-env is bound.
	(print-level, print-circle): Don't redefine built-in variables.

	* emacs-lisp/cust-print.el: Remove leading * from defcustom docs.
	(custom-print-vectors): Remove old comments from doc.

	* emerge.el (menu-bar-emerge-menu): Remove unused variable.
	(emerge-version): Make the variable an obsolete alias for the
	emacs-version variable.  Make the function obsolete.
	(emerge-fast-keymap, emerge-edit-keymap): Make a separate menu for
	Emerge options, rather than merging in into the main Options menu.
	(emerge-options-menu): Adjust menu text.  Use buttons for skip prefers
	and auto advance modes.  Disable edit/fast items when not relevant.

2009-07-20  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/vt420.el (terminal-init-vt420): Fix typo.

2009-07-20  Sam Steingold  <sds@gnu.org>

	* progmodes/ada-mode.el (compile-auto-highlight): Remove the
	variable (removed from compile.el on 2004-03-11).

2009-07-20  Chong Yidong  <cyd@stupidchicken.com>

	* files.el (hack-local-variables-filter): Fix last change.

2009-07-19  Juri Linkov  <juri@jurta.org>

	* files.el (ignored-local-variables): Add `dir-local-variables-alist'.
	(dir-local-variables-alist): New buffer-local variable.
	(hack-local-variables-filter): If variable is not dir-local,
	i.e. `dir-name' is nil, then remove it from `dir-local-variables-alist',
	because file-local overrides dir-local.
	(c-postprocess-file-styles)<declare-function>:
	Remove obsolete declaration.
	(hack-dir-local-variables): Add dir-local variable/value pair to
	`dir-local-variables-alist' and remove duplicates.  Doc fix.

	* help-fns.el (describe-variable): Add information about
	file-local and dir-local variables.

2009-07-19  Chong Yidong  <cyd@stupidchicken.com>

	* files.el (hack-local-variables-filter): Rewrite.

2009-07-19  Glenn Morris  <rgm@gnu.org>

	* progmodes/verilog-mode.el (verilog-error-regexp-add-xemacs):
	Silence compiler by only defining on XEmacs.

	* international/mule.el (auto-coding-regexp-alist): Only match
	BABYL... at the start of buffer, not of lines.  (Bug#3790)

	* calendar/cal-menu.el (cal-menu-set-date-title): Handle calls from
	non-calendar buffers (Bug#3862).  Restore "not on a date" message.
	(cal-menu-context-mouse-menu): Doc fix.

	* desktop.el (desktop-buffers-not-to-save): Set :version tag.

	* simple.el (mail-user-agent): Doc fix.  Set :version tag.

2009-07-18  Juri Linkov  <juri@jurta.org>

	* info.el: Virtual Info keyword finder.
	(add-to-list)<Info-virtual-files>: Add "\\`\\*Finder.*\\*\\'".
	(Info-finder-file): New variable.
	(Info-finder-find-file): New function.
	(finder-known-keywords, finder-package-info)
	(find-library-name, lm-commentary): Use defvar and
	declare-function to silence compiler warnings.
	(Info-finder-find-node): New function.
	(info-finder): New command.

	* subr.el (process-kill-buffer-query-function): New function.
	(add-hook)<kill-buffer-query-functions>: Add hook
	`process-kill-buffer-query-function'.

2009-07-18  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-mode.el (c-before-hack-hook),
	(c-postprocess-file-styles): Give invocation of `c-set-style'
	DONT-OVERRIDE parameter of t.  Already set style variables will
	thus not be overridden by style settings given by `c-file-syle'.

	* files.el (hack-local-variables-filter): Remove entries with
	duplicate keys from `file-local-variables-alist'.

2009-07-18  Eli Zaretskii  <eliz@gnu.org>

	* simple.el (deactivate-mark, activate-mark, set-mark): Don't call
	x-set-selection if display-selections-p returns nil for the
	current frame.

2009-07-18  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (region-active-p, use-region-p): Doc fix (Bug#3873).

2009-07-18  Eli Zaretskii  <eliz@gnu.org>

	* desktop.el (desktop-buffers-not-to-save): Default value is nil.
	Accept nil in addition to a regexp.
	(desktop-files-not-to-save): Add "(ftp)$" to the default regexp.
	Accept nil in addition to a regexp.
	(desktop-save-buffer-p): Don't use desktop-buffers-not-to-save for
	buffers that have an associated file.  Handle nil values of
	desktop-buffers-not-to-save and desktop-files-not-to-save.
	(Bug#3833)

	* term/pc-win.el (x-selection-owner-p, x-own-selection-internal)
	(x-disown-selection-internal): New functions.

2009-07-18  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-mi.el (speedbar-frame): Declare to avoid compiler
	warning.
	(gdb-breakpoints-header): Move forward to avoid compiler warning.
	(gdb-make-header-line-mouse-map): Remove duplicate definition.

2009-07-18  David De La Harpe Golden  <david@harpegolden.net>

	* simple.el (set-mark): Revert last change.

2009-07-17  Tassilo Horn  <tassilo@member.fsf.org>

	* doc-view.el (doc-view-initiate-display): Add yes-or-no-p if
	rendering of pngs is not possible instead of messaging a long
	description.

2009-07-17  David De La Harpe Golden  <david@harpegolden.net>

	* w32-fns.el (x-selection-owner-p): New function.

	* mouse.el (mouse-drag-track): Call deactivate-mark earlier.
	(mouse-yank-at-click, mouse-yank-primary): If
	select-active-regions is non-nil, deactivate the mark before
	insertion.

	* simple.el (deactivate-mark, set-mark): Only save selection if we
	own it.

2009-07-17  Kenichi Handa  <handa@m17n.org>

	* case-table.el (describe-buffer-case-table): Fix for the case
	that KEY is a cons.

2009-07-16  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-rcs.el (vc-rcs-find-file-hook):
	* vc-sccs.el (vc-sccs-find-file-hook): Fix cut and paste error.

2009-07-16  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-wait-for-output): Handle the case when
	commands do not return a newline but a null byte before the shell
	prompt.  (Bug#3858)

2009-07-16  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/ns-win.el (ns-set-alpha): Don't declare.
	(ns-set-background-alpha): Remove function.

2009-07-16  Kevin Ryde  <user42@zip.com.au>

	* emacs-lisp/copyright.el (copyright-update): Save match-data across
	y-or-n-p, for safety.

2009-07-16  Richard Stallman  <rms@gnu.org>

	* files.el (auto-save-mode): If buffer-saved-size is -2,
	don't clobber it.

	* mail/rmail.el (rmail-variables): Set buffer-saved-size to -2.
	(rmail-retry-ignored-headers): Add more uninteresting fields.

2009-07-15  Jari Aalto  <jari.aalto@cante.net>

	* net/rcirc.el (rcirc): Use history variables.
	(rcirc-server-name-history, rcirc-nick-name-history)
	(rcirc-server-port-history): New variables.

2009-07-15  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (set-language-environment-charset):
	If coding-system-charset-list returns `iso-2022' or `emacs-mule',
	ignore them.

	* language/misc-lang.el ("IPA"): Change coding systems to utf-8.
	Delete unibyte-display.

2009-07-15  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (kill-visual-line): Obey kill-whole-line (Bug#3695).

2009-07-15  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (deactivate-mark): Optional argument FORCE.
	(set-mark): Use deactivate-mark.

	* info.el (Info-search): No need to check transient-mark-mode
	before calling deactivate-mark.

	* select.el (x-set-selection): Doc fix.
	(x-valid-simple-selection-p): Allow buffer values.
	(xselect--selection-bounds): Handle buffer values.  Suggested by
	David De La Harpe Golden.

	* mouse.el (mouse-set-region, mouse-drag-track): Call
	copy-region-as-kill before setting the mark, to let
	select-active-regions work.

2009-06-28  David De La Harpe Golden  <david@harpegolden.net>

	* simple.el (deactivate-mark): If select-active-regions is
	non-nil, copy the selection data into a string.
	(activate-mark): If select-active-regions is non-nil, set the
	selection to the current buffer.
	(set-mark): Update selection if select-active-regions is non-nil.

	* select.el (x-valid-simple-selection-p): Allow buffer values.

2009-07-14  Stefan Monnier  <monnier@iro.umontreal.ca>

	* simple.el (mail-user-agent): Default to the upwardly-UI-compatible
	and more featureful message-mode.

2009-07-14  Chong Yidong  <cyd@stupidchicken.com>

	* select.el (x-set-selection): Doc fix.
	(x-valid-simple-selection-p): Disallow selection data consisting
	of a list or cons of integers, since that is not used.
	(xselect--selection-bounds, xselect--int-to-cons): New functions.
	(xselect-convert-to-string, xselect-convert-to-length)
	(xselect-convert-to-filename, xselect-convert-to-charpos)
	(xselect-convert-to-lineno, xselect-convert-to-colno): Use them.

2009-07-14  Dmitry Dzhus  <dima@sphinx.net.ru>

	* progmodes/gdb-mi.el (json-partial-output): Fix broken GDB/MI
	output in -break-info command (Emacs bug #3794).

2009-07-14  Glenn Morris  <rgm@gnu.org>

	* emacs-lisp/edebug.el (edebug-setup-hook, edebug-all-forms)
	(edebug-eval-macro-args, edebug-save-displayed-buffer-points)
	(edebug-print-length, edebug-print-level, edebug-print-circle)
	(edebug-sit-for-seconds, edebug-view-outside)
	(edebug-bounce-point, edebug-set-global-break-condition)
	(edebug-Go-nonstop-mode, edebug-trace-mode)
	(edebug-Trace-fast-mode, edebug-continue-mode)
	(edebug-Continue-fast-mode, edebug-forward-sexp, edebug-help)
	(edebug-visit-eval-list): Doc fixes.

	* subr.el (def-edebug-spec): Doc fix.

2009-07-14  Kenichi Handa  <handa@m17n.org>

	* international/characters.el: Fix setting of category ?C.

2009-07-13  Jan Djärv  <jan.h.d@swipnet.se>

	* term/ns-win.el (x-select-font): defailias x-select-font to
	ns-popup-font-panel instead of generate-fontset-menu.

2009-07-12  Eli Zaretskii  <eliz@gnu.org>

	* desktop.el (desktop-buffers-not-to-save): Remove ".log". (Bug#3833)

2009-07-12  Peter Jolly  <peter@jollys.org>  (tiny change)

	* arc-mode.el (archive-find-type): Allow for a PK00 string before
	the PK\003\004 header (Bug#3770).

2009-07-12  Guanpeng Xu  <herberteuler@hotmail.com>

	* pcomplete.el (pcomplete-comint-setup): Check for
	shell-dynamic-complete-filename too.

2009-07-11  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (temporary-goal-column): Change the value for
	line-move-visual to a cons cell.
	(line-move-visual): Record or set the window hscroll, if
	necessary (Bug#3494).
	(line-move-1): Handle cons value of temporary-goal-column.

2009-07-11  Kenichi Handa  <handa@m17n.org>

	* international/mule-diag.el (describe-character-set): Don't show
	width.

2009-07-10  Sam Steingold  <sds@gnu.org>

	* progmodes/compile.el (compilation-mode-font-lock-keywords):
	Omake sometimes indents the errors it prints, so allow all
	regexps to start with spaces.

2009-07-10  Eli Zaretskii  <eliz@gnu.org>

	* cus-edit.el (customize-changed-options-previous-release):
	Bump value to 22.1.  (Bug#3804)

2009-07-08  Sam Steingold  <sds@gnu.org>

	* progmodes/grep.el (rgrep): Allow grep-find-ignored-directories
	to be a cons cell (test . ignored-directory) to selectively ignore
	some directories depending on the location of the search.

2009-07-08  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-set-file-uid-gid): Handle the case the
	remote user is root, on the local host.
	(tramp-local-host-p): Either the local user or the remote user
	must be root.  (Bug#3771)

2009-07-08  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-mi.el (gdb): Remove description of
	gdb-use-separate-io-buffer.
	(menu): Don't allow toggling of or enable
	gdb-use-separate-io-buffer from menubar.

2009-07-08  E. Jay Berkenbilt  <ejb@ql.org>  (tiny change)

	* mail/unrmail.el (unrmail): Make sure the message ends with two
	newlines (Bug#3769).

2009-07-08  Glenn Morris  <rgm@gnu.org>

	* calendar/calendar.el (calendar-current-date): Rework previous change.

2009-07-08  Ed Reingold  <reingold@emr.cs.iit.edu>

	* calendar/calendar.el (calendar-current-date):
	Add an optional argument giving an offset from today.

2009-07-08  Glenn Morris  <rgm@gnu.org>

	* tutorial.el (tutorial--describe-nonstandard-key):
	Adjust the message for when a key has been unbound.
	(help-with-tutorial): Hide the arch-tag.

2009-07-08  Kenichi Handa  <handa@m17n.org>

	* international/fontset.el (setup-default-fontset): For each
	script, append (not set) font-specs.

	* language/japanese.el (japanese-shift-jis-2004): Fix typo in the
	docstring.

2009-07-08  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-mi.el (gdb-init-1): Move sending
	-data-list-register-names to ...
	(gdb-starting): ... here because GDB 7.0 requires execution to
	have started when using this MI command.
	(gdb-set-header): New function to distinguish select and
	unselected tabs in gdb buffers.
	(gdb-propertize-header): New macro that uses gdb-set-header.
	(gdb-breakpoints-header, gdb-locals-header): Use it.
	(gdb-disassembly-mode-map): Add keybinding to kill buffer.

2009-07-07  Chong Yidong  <cyd@stupidchicken.com>

	* Makefile.in (ELCFILES): Remove fadr.elc.

2009-07-07  Dmitry Dzhus  <dima@sphinx.net.ru>

	* progmodes/gdb-mi.el (gdb-init-1): Disassembly buffer mode name
	may contain frame information, so `string-match' should be used.
	(gdb-update): Disassembly is invalidated through
	`gdb-get-selected-frame'.
	(gdb-pad-string): New function to pad string with spaces.
	(gdb-invalidate-disassembly): Invalidate only if the buffer
	exists.
	(gdb-disassembly-handler-custom): Column alignment.
	(gdb-disassembly-place-breakpoints): Clear old breakpoints before
	placing new ones.
	(gdb-toggle-breakpoint, gdb-delete-breakpoint): Now work from the
	end of line, too.
	(gdb-frame-handler): Match convention to for disassembly buffer
	mode name.
	(gdb-stack-list-frames-handler): Rewritten without regexps.
	(gdb-breakpoints-list-handler-custom): y/n instead of on/off; do
	not highlight breakpoints without line information.
	(gdb-input): Add trailing newline to command.

	* progmodes/gdb-mi.el (gdb-init-1): Set mode name for disassembly
	buffer properly.
	(gdb-breakpoints-list-handler-custom): Replacement for
	`gdb-break-list-handler'. Using real parser instead of regexps
	now.
	(gdb-place-breakpoints): Replacement for `gdb-break-list-custom'.
	Use `gdb-breakpoints-list' instead of parsing breakpoints buffer
	to place breakpoints.
	(def-gdb-memory-unit): A new macro to define gdb-memory-unit-..
	functions.
	(gdb-disassembly-handler-custom): Show overlay arrow.
	(gdb-disassembly-place-breakpoints): Show breakpoints in
	disassembly buffer.
	(gdb-toggle-breakpoint, gdb-delete-breakpoint)
	(gdb-goto-breakpoint): Using `gdb-breakpoint' text properties
	instead of parsing breakpoints buffer. Fixed old menu references
	in `gud-menu-map'.

	* fadr.el: Remove.

	* progmodes/gdb-mi.el: Port memory buffer from gdb-ui.el
	(gdb-memory-address): New variable which holds top address of
	memory page shown in memory buffer
	(gdb-memory-repeat-count, gdb-memory-format, gdb-memory-unit): New
	customization variables.
	New functions:
	(gdb-display-memory-buffer, gdb-frame-memory-buffer): Functions to
	display the memory buffer.
	(gdb-memory-set-address, gdb-memory-set-repeat-count): Set memory
	buffer display parameters.
	(def-gdb-memory-format, gdb-memory-format-binary)
	(gdb-memory-format-octal, gdb-memory-format-unsigned)
	(gdb-memory-format-signed, gdb-memory-format-hexadecimal):
	Functions for setting memory buffer format.
	(gdb-memory-unit-word, gdb-memory-unit-halfword)
	(gdb-memory-unit-giant, gdb-memory-unit-byte): Functions to set
	unit size used in memory buffer.
	(gdb-memory-show-next-page, gdb-memory-show-previous-page): Switch
	to next/previous page of memory buffer.
	Now using (bindat-get-field) instead of fadr functions.

2009-07-07  Sam Steingold  <sds@gnu.org>

	* vc-cvs.el (vc-cvs-merge-news): Fix message parsing for
	non-top-level files.

2009-07-07  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (reset-language-environment): Put
	the highset priority to the charset iso-8859-1.

2009-07-06  Chong Yidong  <cyd@stupidchicken.com>

	* progmodes/hideshow.el (hs-hide-block-at-point): Don't move point
	to the end of the line when locating the block (Bug#700).

2009-07-06  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-handle-write-region): Flush file properties
	in case of short track.

2009-07-07  Michael McNamara  <mac@mail.brushroad.com>

	* verilog-mode.el (verilog-error-regexp-emacs-alist): Coded custom
	representation of verilog error regular expressions to work with
	Emacs-22's new format.
	(verilog-error-regexp-xemacs-alist): Coded custom representation
	of verilog error regular expressions to work with XEmacs format
	(verilog-error-regexp-add-xemacs): Hook routine to install verilog
	error recognition into XEmacs.
	(verilog-error-regexp-add-emacs): Hook routine to install verilog
	error recognition into Emacs-22.

2009-07-06  Chong Yidong  <cyd@stupidchicken.com>

	* woman.el: Remove stand-alone closing parentheses.
	(woman-file-name, woman2-format-paragraphs)
	(woman-leave-blank-lines): Code cleanup.
	(woman-use-own-frame): Change default to nil.
	(woman-italic, woman-bold, woman-unknown, woman-addition): Change
	defaults to inherit from default faces.
	(woman2-process-escapes): Consume the newline after a stand-alone
	filler character (Bug#3651).

2009-07-06  Glenn Morris  <rgm@gnu.org>

	* ffap.el (ffap-version): Make it an obsolete alias for emacs-version.
	(top-level): Move provide to the end.
	(ffap): Remove defunct URL from custom group.

	* subr.el (eval-after-load): Doc fix.

2009-07-06  Vincent Belaïche <vincent.belaiche@gmail.com>

	* calc/calc-embed.el (calc-embedded-make-info): Don't force when
	`calc-embedded-word' is called twice.

2009-07-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* files.el (find-alternate-file-other-window, find-alternate-file):
	Obey confirm-nonexistent-file-or-buffer.

2009-07-05  Michael Albinus  <michael.albinus@gmx.de>

	* dired-aux.el (dired-show-file-type): Handle remote files.

2009-03-22  Jari Aalto  <jari.aalto@cante.net>

	* desktop.el (desktop-globals-to-save):
	Add file-name-history (Bug#2750).

2009-07-05  Chong Yidong  <cyd@stupidchicken.com>

	* add-log.el (add-log-current-defun-header-regexp): Doc fix (Bug#2217).

2009-07-04  Johan Bockgård  <bojohan@gnu.org>

	* eshell/esh-arg.el (eshell-parse-argument-hook): Put `number'
	property on entire argument since this is what eshell-lisp-command
	expects.

2009-07-03  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp-gvfs.el (tramp-gvfs-methods)
	(tramp-gvfs-zeroconf-domain)
	(tramp-bluez-discover-devices-timeout): Add version flag.
	(tramp-gvfs-handler-mounted-unmounted)
	(tramp-gvfs-connection-mounted-p): Polish handling of
	incompatibilities between GVFS 0.2 and 1.0.

2009-07-03  Jan Djärv  <jan.h.d@swipnet.se>

	* cus-start.el (all): Add make-pointer-invisible.

2009-07-03  Jay Belanger  <jay.p.belanger@gmail.com>

	* calc-math.el (math-use-emacs-fn): Make sure that the number is
	formatted correctly.

2009-07-02  Juri Linkov  <juri@jurta.org>

	* info.el: Virtual Info files and nodes.
	(Info-virtual-files, Info-virtual-nodes): New variables.
	(Info-current-node-virtual): New variable.
	(Info-virtual-file-p, Info-virtual-fun, Info-virtual-call):
	New functions.
	(Info-file-supports-index-cookies): Use Info-virtual-file-p
	to check for a virtual file instead of checking a fixed list
	of node names.
	(Info-find-file): Use Info-virtual-fun and Info-virtual-call
	instead of ad-hoc processing of "dir" and (apropos history toc).
	(Info-find-node-2): Use Info-virtual-fun and Info-virtual-call
	instead of ad-hoc processing of "dir" and (apropos history toc).
	Reread a file when moving from a virtual node.
	(add-to-list)<Info-virtual-files>: Add "\\`dir\\'".
	(Info-directory-toc-nodes, Info-directory-find-file)
	(Info-directory-find-node): New functions.
	(add-to-list)<Info-virtual-files>: Add "\\`\\*History\\*\\'".
	(Info-history): Move part of code to
	`Info-history-find-node'.
	(Info-history-toc-nodes, Info-history-find-file)
	(Info-history-find-node): New functions.
	(add-to-list)<Info-virtual-nodes>: Add "\\`\\*TOC\\*\\'".
	(Info-toc): Move part of code to `Info-toc-find-node'.
	(Info-toc-find-node): New function.
	(Info-toc-insert): Rename from `Info-insert-toc'.  Don't insert
	the current Info file name to references because now the node
	"*TOC*" belongs to the same Info manual.
	(Info-toc-build): Rename from `Info-build-toc'.
	(Info-toc-nodes): Rename input argument `file' to `filename'.
	Use Info-virtual-fun, Info-virtual-call and Info-virtual-file-p
	instead of ad-hoc processing of ("dir" apropos history toc).
	(Info-index-nodes): Use Info-virtual-file-p
	to check for a virtual file instead of checking a fixed list
	of node names.
	(Info-index-node): Add check for `Info-current-node-virtual'.
	Raise `save-match-data' higher up the tree to contain
	`search-forward' too (bug fix).
	(add-to-list)<Info-virtual-nodes>: Add "\\`\\*Index.*\\*\\'".
	(Info-virtual-index-nodes): New variable.
	(Info-virtual-index-find-node, Info-virtual-index): New functions.
	(add-to-list)<Info-virtual-files>: Add "\\`\\*Apropos\\*\\'".
	(Info-apropos-file, Info-apropos-nodes): New variables.
	(Info-apropos-toc-nodes, Info-apropos-find-file)
	(Info-apropos-find-node, Info-apropos-matches): New functions.
	(info-apropos): Move part of code to `Info-apropos-find-node' and
	`Info-apropos-matches'.
	(Info-mode-map): Bind "I" to `Info-virtual-index'.
	(Info-desktop-buffer-misc-data): Use Info-virtual-file-p to check
	for a virtual file instead of checking a fixed list of node names.

	* simple.el (async-shell-command): New command.

	* bindings.el (esc-map): Bind "&" to `async-shell-command'.

	* net/tramp-gvfs.el (tramp-gvfs-connection-mounted-p): Use `elt'
	instead of `mount-info'.

2009-07-02  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp-gvfs.el (tramp-gvfs-handler-mounted-unmounted)
	(tramp-gvfs-connection-mounted-p): Handle changed mount-info interface.

2009-07-02  Kenichi Handa  <handa@m17n.org>

	* international/mule.el (set-keyboard-coding-system): Force *-unix
	coding-system to avoid eol conversion.

2009-07-01  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp-gvfs.el (tramp-gvfs-file-name-handler-alist):
	Add handler for `process-file', `shell-command' and
	`start-file-process'.
	(tramp-gvfs-handle-shell-command)
	(tramp-gvfs-handle-start-file-process)
	(tramp-gvfs-handle-process-file): New defuns.
	(tramp-synce-list-devices): Simplify check for existence of property.

2009-07-01  Jan Djärv  <jan.h.d@swipnet.se>

	* startup.el (command-line-x-option-alist): Add -mm and --maximized.

2009-07-01  Eduard Wiebe  <usenet@pusto.de>  (tiny change)

	* language/korean.el (set-language-info-alist): Add korean-cp949,
	cp949 to spec.

2009-07-01  Kenichi Handa  <handa@m17n.org>

	* Makefile.in (ELCFILES): Delete encoded-kb.elc.

	* international/encoded-kb.el: Deleted.

	* international/mule.el (set-keyboard-coding-system): Perform the
	necessary setup here instead of calling encoded-kbd-setup-display.

2009-07-01  Glenn Morris  <rgm@gnu.org>

	* progmodes/f90.el (f90-break-delimiters, f90-no-break-re): Doc fixes.

2009-07-01  Evangelos Evangelou  <vangelis@email.unc.edu>  (tiny change)

	* progmodes/f90.el (f90-no-break-re): Add "(/" and "/)".  (Bug#3730)

2009-06-30  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-do-copy-or-rename-file-directly):
	Handle also the 'rename case, when setting file modes.  (Bug#3712)
	(tramp-default-file-modes) Remove execute permissions.

	* net/tramp-gvfs.el (tramp-gvfs-methods): Add "synce" method.
	(top): Add a default for "synce" in `tramp-default-user-alist'.
	Add completion function for "synce" method.
	(tramp-hal-service, tramp-hal-path-manager)
	(tramp-hal-interface-manager, tramp-hal-interface-device):
	New defconst.
	(tramp-gvfs-connection-mounted-p): Handle empty user name for synce.
	(tramp-synce-list-devices, tramp-synce-parse-device-names):
	New defuns.

	* net/trampver.el: Update release number.

2009-06-30  Kenichi Handa  <handa@m17n.org>

	* international/fontset.el (setup-default-fontset): Add CJK fonts
	for symbols and the other miscellaneous characters.

	* language/korea-util.el (setup-korean-environment-internal):
	Make char-width-table suitable for Korean environments.
	(exit-korean-environment): Cancel above.

	* language/chinese.el ("Chinese-GB", "Chinese-BIG5")
	("Chinese-CNS", "Chinese-EUC-TW", "Chinese-GBK"): Add a
	setup-funcion to make char-widht-table suitable for respective
	environments, and an exit-function to cancel that.

	* language/japan-util.el (setup-japanese-environment-internal):
	Call use-cjk-char-width-table with arg `ja_JP'.

	* international/characters.el (cjk-char-width-table): Delete it.
	(cjk-char-width-table-list): New variable.
	(use-cjk-char-width-table): New arg local-name.
	(use-default-char-width-table): Fix for the case that Emacs is
	already using the default char-width-table.

2009-06-29  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-do-copy-or-rename-file-directly): Set file
	modes mandatory.  (Bug#3712)

2009-06-29  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-cmds.el (c-mask-paragraph): Remove a spurious
	correction between the visible width of TABs and their number of bytes.

2009-06-29  Chong Yidong  <cyd@stupidchicken.com>

	* server.el (server-buffer-done): Prevent kill-buffer from
	prompting by clearing the buffer modification flag (Bug#3696).

2009-06-28  Michael McNamara  <mac@mail.brushroad.com>

	* verilog-mode.el (verilog-beg-of-statement)
	(verilog-endcomment-reason-re): Support unique case and priority case.
	(verilog-basic-complete-re): Support localparam lineup.
	(verilog-beg-of-statement-1): Fix for robustness, unique case.
	(verilog-set-auto-endcomments): Fix for unique case, always_comb
	commenting.
	(verilog-leap-to-case-head): Now support *nested* unique &
	priority case statements.
	(verilog-auto-lineup): Make just declarations the default (as it
	had been).
	(verilog-leap-to-case-head): Support priority/unique case statements.
	(verilog-auto-lineup): Rework to give users radio buttons to
	select the various styles of automatic lineup
	(verilog-error-regexp-alist): Rework to support the XEmacs style
	of error regular expressions from compilers, lint tools &
	simulators.  Note that GNU Emacs has made it impossible for a mode
	to load such things.
	(electric-verilog-terminate-line, verilog-indent-declaration)
	(verilog-auto-wiure): Rework for radio button selection of
	auto-lineup selection of specification of auto lineup.
	(verilog-beg-of-statement-1): Redesign to support proper operation
	in additional code, based on testing with auto-lineup.
	(verilog-calculate-indent, assignments & declarations)
	(verilog-backward-token): Enhance to support auto-lineup of
	assignments & declarations.
	(verilog-in-directive-p, verilog-at-struct-p): New function for
	easy test of whether we are.
	(verilog-pretty-declarations, verilog-pretty-expr): Massive rework
	to support safe execution at almost anyline.
	(verilog-calc-1): Properly support indenting deep inside generate
	blocks.
	(verilog-init-font) Remove definition & use of verilog-init-font,
	as it is redundant with font-lock-defaults.
	(verilog-mode): Alter the definition of verilog-font-lock-defualts
	to avoid circular calls if syntax-ppss is a function (as is the
	case now in 22.x GNU Emacs) as that function would sometimes call
	itself, leading to (nearly) infinite recursion
	(verilog-ovm-begin-re, verilog-ovm-end-re)
	(verilog-ovm-statement-re, verilog-leap-to-head)
	(verilog-backward-token): Add support for OVM macros.  Some are
	complete statements, and others open and close scopes like begin
	and end.
	(verilog-defun-level-not-generate-re, verilog-defun-level-re)
	(verilog-defun-level-generate-only-re): Really fix the defun-list
	compilation issue
	(verilog-calc-1) (verilog-beg-of-statement): Enhance support for
	coverpoint, constraint and cross statements
	(verilog-defun-level-list, verilog-generate-defun-level-list)
	(verilog-all-defun-level-list): Redo these specifications - it is
	too hard to support eval-when compile aggregation of lists also
	built at when-compile time.
	(verilog-defun-level-list): Place defconsts of variables used in
	building regular expressions which are built in eval-when-compile
	bodies in the same eval-when-compile body to facilitate compile
	without load.
	(verilog-beg-block-re-ordered): Support indenting
	virtual/protected tasks and functions.
	(verilog-defun-level-list,verilog-in-generate-region-p)
	(verilog-backward-ws&directives, verilog-calc-1): Speed up
	indentation of some module items (generate items).
	(verilog-forward-sexp, verilog-leap-to-head): Support stepping
	across virtual/protected tasks and functions.

2009-06-28  Wilson Snyder  <wsnyder@wsnyder.org>

	* verilog-mode.el (verilog-auto-arg, verilog-auto-arg-sort):
	Allow sorting AUTOARG lists.  Suggested by Andrea Fedeli.
	(verilog-read-sub-decls-line): Fix AUTOWIRE signals getting lost
	in concatenations.  Reported by Yishay Belkind.
	(verilog-auto-ascii-enum): Support one-hot state machines in
	AUTOASCIIENUM.  Suggested by Lloyd Gomez.
	(verilog-auto-inst, verilog-auto-inst-port): Include interface
	modport in AUTOINST and add vl-modport for users.  Reported by
	David Rogoff.
	(verilog-auto-inout-module, verilog-auto-inst)
	(verilog-decls-get-interfaces, verilog-insert-definition)
	(verilog-insert-one-definition, verilog-read-decls)
	(verilog-read-sub-decls, verilog-read-sub-decls-sig)
	(verilog-sig-modport, verilog-signals-combine-bus)
	(verilog-subdecls-get-interfaces): Fix expansion of SystemVerilog
	interfaces in AUTOINOUTMODULE, AUTOINOUTCOMP, and AUTOINST.
	Suggested by David Rogoff.
	(verilog-repair-open-comma): Fix non-insertion of comma when
	`DEFINE occurs in V2K argument list.  Reported by Lane Brooks.
	(verilog-make-width-expression): Simplify [A-1:0] expression
	widths to just {A{1'b0}}.
	(verilog-mode): Cleanup checkdoc warnings.
	(verilog-auto-inout-module, verilog-signals-matching-dir-re):
	Add third optional regexp to AUTOINOUTMODULE to allow selecting only
	inputs/outputs or data type.  Suggested by Vasu Kandadi.
	(next-error-last-buffer): Fix byte-compiler warning.
	(verilog-auto, verilog-auto-insert-lisp, verilog-auto-inst)
	(verilog-delete-auto): Add AUTOINSERTLISP to insert arbitrary lisp
	or shell command text during AUTO expansion.  Suggested by Tad Truex.
	(verilog-read-sub-decls-expr, verilog-read-sub-decls-line)
	(verilog-read-sub-decls-sig, verilog-symbol-detick-text):
	Fix dotted nets {a.b,c.d} and excaped identifiers being mis-included
	in AUTOINOUT. Reported by Matthew Lovell.
	(verilog-read-always-signals-recurse): Fix AUTORESET "if (a<=b)"
	causing use of <= assignments.  Reported by Alex Reed.
	(verilog-read-decls): Fix triand, trior, wand, wor to be
	recognized by AUTOWIRE.  Reported by Spencer Isaacson.
	(verilog-extended-complete-re): Support import "DPI-C" functions.
	(verilog-read-always-signals-recurse): Fix AUTORESET of "x <=
	y[a+1:a+1]" to not include a in reset list.  Reported by Dan Dever.
	(verilog-insert-date, verilog-insert-year)
	(verilog-sk-header-tmpl): Fix verilog-header inserting error on
	Windows systems.  Reported by Michael Potts.
	(verilog-read-module-name): Fix AUTOINST when the child module
	declaration's name is a tick define. Reported by Elliot Mednick.
	(verilog-read-decls): Fix V2K parameter bit subscripts getting
	passed to next parameter's definition. Reported by Bruce T.
	(verilog-read-decls): Fix detecting "parameter int" when using
	AUTOINSTPARAM.  Reported by Bruce T.
	(verilog-goto-defun): Fix goto not finding modules unless first
	perform a verilog-auto expansion. Suggested by Lawrence Butcher.
	(verilog-mode): Expand -f flag arguments on entry to mode so
	verilog-goto-defun will work.  Reported by Lawrence Butcher.
	(verilog-getopt): Expand environment variables in -f file
	arguments.  Suggested by Lawrence Butcher.
	(verilog-set-define): Fix "Symbol's value as variable is void"
	when reading enumerations.
	(verilog-auto-ascii-enum): Fix duplicate labels in AUTOASCIIENUM.
	Suggested by Stephen Peltan.
	(verilog-read-defines): Fix reading of enumerations in include
	files.  Reported by Steve Peltan.

2009-06-28  David De La Harpe Golden  <david@harpegolden.net>

	* files.el (trash-directory): Fix defcustom type.

2009-06-28  Juri Linkov  <juri@jurta.org>

	* help-fns.el (describe-function-1): Correctly locate adviced
	functions in hyperlink (Bug#2438).

2009-06-28  Chong Yidong  <cyd@stupidchicken.com>

	* files.el (trash-directory): Change default to nil.
	(move-file-to-trash): If trash-directory is nil and
	system-move-file-to-trash is unbound, perform freedesktop-style
	trashing.

2009-06-28  David De La Harpe Golden  <david@harpegolden.net>

	* files.el (move-file-to-trash): Add freedesktop trash
	support (Bug#973).

2009-06-28  Glenn Morris  <rgm@gnu.org>

	* autorevert.el (global-auto-revert-non-file-buffers)
	(global-auto-revert-mode): Doc fixes.

2009-06-27  Johan Bockgård  <bojohan@gnu.org>

	* emacs-lisp/cl-specs.el (defstruct): Fix :conc-name spec.

2009-06-27  Chong Yidong  <cyd@stupidchicken.com>

	* faces.el (x-handle-named-frame-geometry): Ensure that we have
	opened an X connection before calling x-get-resource (Bug#3194).

	* play/doctor.el: Remove reference to obsolete website.
	(make-doctor-variables): Correct grammar mistake (Bug#2633).

2009-06-26  Dan Nicolaescu  <dann@ics.uci.edu>

	Remove find-file-not-found-hook VC method.  (Bug#2757)
	* vc-hooks.el (vc-file-not-found-hook)
	(vc-default-find-file-not-found-hook): Remove functions.
	(find-file-not-found-functions): Do not add vc-file-not-found-hook.
	* vc-rcs.el (vc-rcs-find-file-not-found-hook): Remove function.
	* vc.el:
	* vc-hg.el:
	* vc-git.el: Do not mention find-file-not-found-hook VC method.

2009-06-25  Agustín Martín  <agustin.martin@hispalinux.es>

	* textmodes/ispell.el: Add `ispell-looking-back' XEmacs
	  compatibility function for `looking-back'

	* textmodes/flyspell.el (sgml-mode-flyspell-verify):
	Use `ispell-looking-back'

2009-06-24  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp-gvfs.el (tramp-gvfs-handle-make-directory): Use `dir'
	rather than `filename'.

2009-06-23  Miles Bader  <miles@gnu.org>

	* face-remap.el (text-scale-set): New function.

2009-06-23  Glenn Morris  <rgm@gnu.org>

	* pcmpl-rpm.el (pcomplete/rpm): Doc fix.

	* bindings.el (mode-line-modified): Fix case of "Buffer is modified".

	* textmodes/ispell.el (ispell-local-dictionary): Doc fix.

	* progmodes/gdb-mi.el (gud-remove, gud-break): Update declarations.

	* calendar/cal-dst.el (calendar-time-zone-daylight-rules):
	Simplify Persian conditionals.

	* calc/calc-graph.el (calc-graph-plot): Avoid assignment to free
	variable `filename'.

	* comint.el (comint-insert-input): Doc fix.

	* Makefile.in (ELCFILES): Fix typo in previous change.

2009-06-23  Miles Bader  <miles@gnu.org>

	* cus-start.el: Add entry for `recenter-redisplay'.

2009-06-22  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-hooks.el (vc-stay-local-p, vc-state, vc-working-revision):
	Add an optional argument for the backend, use it instead of
	calling vc-backend.
	(vc-mode-line): Add an optional argument for the backend.
	Pass the backend to vc-state and vc-working-revision.  Move code for
	special handling for vc-state being a buffer to ...

	* vc-rcs.el (vc-rcs-find-file-hook):
	* vc-sccs.el (vc-sccs-find-file-hook): ... here.  New functions.

	* vc-svn.el (vc-svn-state, vc-svn-dir-status, vc-svn-checkout)
	(vc-svn-print-log, vc-svn-diff): Pass 'SVN to vc-state,
	vc-stay-local-p and vc-mode-line calls.

	* vc-cvs.el (vc-cvs-state, vc-cvs-checkout, vc-cvs-print-log)
	(vc-cvs-diff, vc-cvs-annotate-command)
	(vc-cvs-make-version-backups-p, vc-cvs-stay-local-p)
	(vc-cvs-dir-status): Pass 'CVS to vc-state, vc-stay-local-p and
	vc-mode-line calls.

	* vc.el (vc-deduce-fileset): Use vc-deduce-fileset instead of
	direct comparison.
	(vc-next-action, vc-transfer-file, vc-rename-file): Also pass the
	backend when calling vc-mode-line.
	(vc-register): Do not create a closure for calling the vc register
	function, call it directly.

2009-06-23  Dan Nicolaescu  <dann@ics.uci.edu>

	* emacs-lisp/elp.el (elp-output-insert-symname): Add a link face
	to make it obvious item can be clicked.

	* vc-mtn.el (vc-mtn-after-dir-status, vc-mtn-dir-status): New functions.

2009-06-23  Kenichi Handa  <handa@m17n.org>

	* language/korea-util.el (korean-key-bindings): Change the binding
	of F9 to hangul-to-hanja-conversion.  Bind Hangul_Hanja to the
	same command.

2009-06-22  Michael Albinus  <michael.albinus@gmx.de>

	Sync with Tramp 2.1.16.

	* Makefile.in (ELCFILES): Add net/tramp-gvfs.elc.

	* net/tramp.el (top): Require tramp-gvfs.  Catch `tramp-loading',
	when a loading of a package fails.  Completion function for rsync
	is `tramp-completion-function-alist-ssh'.
	(all): Replace all calls of `split-string' and
	`tramp-split-string' by `tramp-compat-split-string'.
	(tramp-default-method): Use `tramp-compat-process-running-p'.
	(tramp-default-proxies-alist): Allow also Lisp forms.
	(tramp-remote-path): Add choice "Private Directories".
	(tramp-wrong-passwd-regexp): Remove "Tramp connection closed" option.
	(tramp-domain-regexp): Allow also "-", "_" and ".".
	(tramp-end-of-output): Remove newlines, and add "$" at the end.
	(tramp-file-name-handler-alist): Add handler for `dired-uncache'.
	(tramp-debug-message): Insert header line in debug buffer.
	(tramp-handle-directory-files-and-attributes-with-stat):
	Care about filenames with spaces, or starting with "-".
	(tramp-handle-dired-uncache): New defun.
	(tramp-handle-insert-directory): Don't flush the directory from
	cache, this is handled by `dired-uncache' now.
	(tramp-handle-insert-file-contents): Improve error handling.
	(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
	Quote `tramp-end-of-output'.
	(tramp-action-password): Improve trace message.
	(tramp-check-for-regexp): Both echoes must be present, before removing.
	(tramp-open-connection-setup-interactive-shell): Trace coding system.
	(tramp-compute-multi-hops): Eval cons cells of
	`tramp-default-proxies-alist'.
	(tramp-maybe-open-connection): Use the same command pattern for
	first hop and further hops.
	(tramp-wait-for-output): Remove handling of newlines.
	(tramp-get-remote-path): Handle also `tramp-own-remote-path'.
	(tramp-split-string): Remove function.  It is handled in
	tramp-compat now.

	* net/tramp-cmds.el (tramp-bug):
	Recommend `tramp-cleanup-all-connections' in the bug mail.

	* net/tramp-compat.el (tramp-compat-split-string)
	(tramp-compat-process-running-p): New defuns.

	* net/tramp-fish.el (tramp-fish-file-name-handler-alist): Add handler
	for `dired-uncache'.

	* net/tramp-gvfs.el: New package.

	* net/tramp-smb.el (tramp-smb-file-name-handler-alist):
	Add handler for `dired-uncache'.
	(tramp-smb-handle-file-local-copy): Cleanup in case of error.

	* net/trampver.el: Update release number.  Make version check fit
	for SXEmacs 22.

2009-06-22  Jim Meyering  <meyering@redhat.com>

	Automatically handle .xz suffix (XZ-compressed files), too.
	* jka-cmpr-hook.el (jka-compr-compression-info-list): Add xz.
	XZ is the successor to LZMA: <http://tukaani.org/xz/>

2009-06-22  Dmitry Dzhus  <dima@sphinx.net.ru>
	    Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-mi.el: Pull further modified changes from Dmitry's
	repository (http://sphinx.net.ru/hg/gdb-mi/).

2009-06-22  Glenn Morris  <rgm@gnu.org>

	* files.el (dir-locals-collect-mode-variables): Allow for any number of
	`mode' and `eval' entries.  (Bug#3430)

	* Makefile.in (ELCFILES): Add fadr.elc.

	* calendar/appt.el (appt-make-list): Fix off-by-one error caused by
	differing behavior of \n and ^ in strings.  (Bug#3385)

	* emacs-lisp/cl-indent.el: Remove leading "*" from defcustom docs.

	* emacs-lisp/lisp-mode.el (lisp-indent-offset): Fix safe-local-variable
	property.
	(lisp-indent-function): Make it a defcustom.

2009-06-21  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el: Replace with ...
	* progmodes/gdb-mi.el: ... this file.
	* progmodes/gud.el: Modify for gdb-mi.el.

2009-06-21  Dmitry Dzhus  <dima@sphinx.net.ru>

	* fadr.el: New file.

See ChangeLog.14 for earlier changes.

;; Local Variables:
;; coding: utf-8
;; End:

    Copyright (C) 2009  Free Software Foundation, Inc.

  This file is part of GNU Emacs.

  GNU Emacs is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  GNU Emacs is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with GNU Emacs.  If not, see <http://www.gnu.org/licenses/>.

;; arch-tag: d3e45e38-19e2-49b6-8dc2-7cb26adcc5a1
